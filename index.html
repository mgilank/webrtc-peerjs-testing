<head>
  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.3.2/dist/peerjs.min.js"></script>
  <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
  <style>

    #video-container {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

#local-video {
  max-width: 100%;
  max-height: 100%;
}

  </style>
</head>

<body>
    <div id="video-container">
        <video id="local-video" autoplay playsinline></video>
    </div>
</body>

<script>
    const peer = new Peer(); // create a PeerJS instance
let myID; // declare a variable to store the client ID

peer.on("open", (id) => {
  // once the PeerJS instance is ready, get the client ID
  myID = id;
});

const video = document.getElementById("local-video");

navigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {
  // once the user grants permission, create a video element to display the stream
  const video = document.createElement("video");
  video.srcObject = stream;
  video.play();

  // add the video element to the page
  const videoContainer = document.getElementById("video-container");
  videoContainer.appendChild(video);
});

const conn = peer.connect("other-client-id"); // replace "other-client-id" with the ID of the other client

conn.on("open", () => {
  // once the connection is established, send your stream to the other client
  const stream = video.srcObject;
  const call = peer.call(conn.peer, stream);

  // answer incoming calls from the other client
  peer.on("call", (call) => {
    call.answer(stream);
  });
});

</script>